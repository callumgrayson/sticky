"use strict";function addLoadEvent(e){var t=window.onload;window.onload="function"!=typeof t?e:function(){t(),e()}}function addJot(e,t){var n=document.getElementsByClassName("jot-0")[0],a=document.getElementById("jot-surface"),o=n.cloneNode(!0);if(o.className="jot",e&&t){var s=o.getElementsByClassName("jot-title")[0],d=o.getElementsByClassName("jot-content")[0];s.innerHTML=e,d.innerHTML=t}var l=document.getElementsByClassName("jot")[0];a.insertBefore(o,l),o.getElementsByClassName("jot-delete")[0].addEventListener("click",deleteJot)}function deleteJot(e){var t=document.getElementById("jot-surface"),n=e.target.parentNode.parentNode;t.removeChild(n),saveJots(),e.preventDefault()}function saveJots(){for(var e=document.getElementsByClassName("jot"),t=[],n=0;n<e.length;n++){var a={title:e[n].getElementsByClassName("jot-title")[0].firstChild.nodeValue,text:e[n].getElementsByClassName("jot-content")[0].firstChild.nodeValue};t.unshift(a)}localStorage.setItem("jots",JSON.stringify(t))}function fetchJots(){for(var a=JSON.parse(localStorage.getItem("jots")),e=function(e){var t=a[e].title,n=a[e].text;setTimeout(function(){addJot(t,n)},120*e)},t=0;t<a.length;t++)e(t)}function searchMessages(e){for(var t=e.value.toUpperCase(),n=document.getElementsByClassName("jot-title"),a=0;a<n.length;a++){var o=-1<n[a].firstChild.nodeValue.replace(/[^0-9a-zA-Z\xC0-\xFF \-]/g,"").toUpperCase().indexOf(t);n[a].parentNode.parentNode.style.display=o?"":"none"}}function addNewJotListener(){document.getElementById("add-jot").addEventListener("click",addJot)}function addSaveListener(){document.getElementById("jot-save").addEventListener("click",saveJots)}function addSearchListener(){var e=document.getElementById("search-messages");e.addEventListener("input",function(){return searchMessages(e)})}addLoadEvent(addNewJotListener),addLoadEvent(addSaveListener),addLoadEvent(addSearchListener),addLoadEvent(fetchJots);